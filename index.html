<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>videojs-frames Demo</title>
  <link href="node_modules/video.js/dist/video-js.css" rel="stylesheet">
  <link href="dist/videojs-frames.css" rel="stylesheet">
</head>
<body>
  <video id="videojs-frames-player" class="video-js  vjs-16-9 vjs-default-skin" controls muted>
    <source src="http://vjs.zencdn.net/v/oceans.mp4" type='video/mp4'>
    <source src="http://vjs.zencdn.net/v/oceans.webm" type='video/webm'>
  </video>
  <ul>
    <li><a href="/test/debug.html">Run unit tests in browser.</a></li>
    <li><a href="docs/api/">Read generated docs.</a></li>
    <li><button id='smpte'>smpte</button></li>
    <li><button id='frames'>frames</button></li>
    <li><button id='seconds'>seconds</button></li>
    <li><button id='miliseconds'>miliseconds</button></li>
  </ul>
  <script src="node_modules/video.js/dist/video.js"></script>
  <script src="dist/videojs-frames.js"></script>
  <script>
    (function(window, videojs) {
      
        var omPlayer = window.omPlayer = videojs('videojs-frames-player',{
                html5: {
                    hls: {
                        overrideNative: true // NEW OVERIDE NATIVE::
                    } 
                },
                playbackRates: [0.5, 1, 1.5, 2],      
                controlBar: {
                    volumePanel: {inline: false}
                }
            });
      
        var frames = window.frames = omPlayer.frames({
            framerate: 24
        });

        // Moving this outside of plugin for know!
        omPlayer.on('keydown', function(event){

            console.log('keyDown', event);

            var that = this;

            // Play Pause
            if(event.which === 32){

                if (this.paused()) {
                            
                    this.play();

                }else{

                    this.pause();
                  
                }

            }

            // Arrow Left
            if(event.which === 37){

                this.frames().seekBackward(1, function(response){

                    //that.frames().trigger('updateDisplay');
                            
                });

            }

            // Arrow Right
            if(event.which === 39){

                this.frames().seekForward(1, function(response){

                    //that.frames().trigger('updateDisplay');

                });

            }

        });

        var smpte = document.getElementById("smpte");
        smpte.addEventListener("click",function(e){
          
            omPlayer.frames().trigger('switch', {
                format: 'SMPTE'
            });

        },false);

        var frames = document.getElementById("frames");
        frames.addEventListener("click",function(e){
          
            omPlayer.frames().trigger('switch', {
                format: 'frames'
            });

        },false);

         var seconds = document.getElementById("seconds");
        seconds.addEventListener("click",function(e){
          
            omPlayer.frames().trigger('switch', {
                format: 'seconds'
            });

        },false);

         var miliseconds = document.getElementById("miliseconds");
        miliseconds.addEventListener("click",function(e){
          
            omPlayer.frames().trigger('switch', {
                format: 'miliseconds'
            });

        },false);

    }(window, window.videojs));
  </script>
</body>
</html>
